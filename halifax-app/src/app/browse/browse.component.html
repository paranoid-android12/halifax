


@if(isCart){
    <div class="bg-white h-[60px] overscroll-none justify-between items-center py-2 px-6 flex flex-row border-b-2 border-[#E8E8E8]">
        <p class="font-Sofia font-[1000] text-[1.4rem]">Halifax</p>
    </div>
    <div class="p-10 grid select-none">
        <div (click)="isCart = !isCart" class="rounded-[50%] w-[50px] h-[50px] bg-white flex justify-center items-center shadow-main">
            <svg width="30" height="30" viewBox="0 0 51 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.1562 23.9062H43.0312C43.4539 23.9062 43.8593 24.0742 44.1582 24.373C44.4571 24.6719 44.625 25.0773 44.625 25.5C44.625 25.9227 44.4571 26.3281 44.1582 26.627C43.8593 26.9258 43.4539 27.0938 43.0312 27.0938H11.1562C10.7336 27.0938 10.3282 26.9258 10.0293 26.627C9.73041 26.3281 9.5625 25.9227 9.5625 25.5C9.5625 25.0773 9.73041 24.6719 10.0293 24.373C10.3282 24.0742 10.7336 23.9062 11.1562 23.9062Z" fill="#2A5C66"/>
                <path d="M11.816 25.5L25.0345 38.7154C25.3338 39.0146 25.5019 39.4205 25.5019 39.8437C25.5019 40.267 25.3338 40.6729 25.0345 40.9721C24.7353 41.2714 24.3294 41.4395 23.9062 41.4395C23.4829 41.4395 23.0771 41.2714 22.7778 40.9721L8.43404 26.6284C8.28562 26.4803 8.16787 26.3045 8.08752 26.1108C8.00718 25.9172 7.96582 25.7096 7.96582 25.5C7.96582 25.2904 8.00718 25.0828 8.08752 24.8892C8.16787 24.6955 8.28562 24.5197 8.43404 24.3716L22.7778 10.0279C23.0771 9.72861 23.4829 9.56049 23.9062 9.56049C24.3294 9.56049 24.7353 9.72861 25.0345 10.0279C25.3338 10.3271 25.5019 10.733 25.5019 11.1562C25.5019 11.5795 25.3338 11.9854 25.0345 12.2846L11.816 25.5Z" fill="#2A5C66"/>
            </svg>
        </div>

        <p class="font-Sofia font-[1000] text-[2.2rem]">Products on Cart</p>
        <div class="flex flex-row gap-2">
            <div class="flex flex-col flex-1 grid gap-3 grid-cols-2">
                <div *ngFor="let cart of carts" class="flex flex-row border-2">
                    <img class="w-[100px]" [src]="cart.product_image">
                    <div class="flex flex-col px-3 py-2 flex-1">
                        <div class="flex flex-row justify-between">
                            <p class="w-[90%]">{{ cart.product_name }}</p>
                            <svg (click)="deleteCart(cart)" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 19C6 19.5304 6.21071 20.0391 6.58579 20.4142C6.96086 20.7893 7.46957 21 8 21H16C16.5304 21 17.0391 20.7893 17.4142 20.4142C17.7893 20.0391 18 19.5304 18 19V7H6V19ZM8 9H16V19H8V9ZM15.5 4L14.5 3H9.5L8.5 4H5V6H19V4H15.5Z" fill="#6437A0"/>
                            </svg>
                                
                        </div>
                        <p class="text-[1.2rem] text-[#6437A0]">₱{{ cart.product_price * cart.quantity }}</p>


                        <div class="flex flex-row w-[100px] border-2 justify-between my-3">
                            <div class="bg-[#F9F9F9]">
                                <svg (click)="decrementValue(cart)" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 12.998H5V10.998H19V12.998Z" fill="#6437A0"/>
                                </svg>
                                    
                            </div>
                
                            <p class="flex-1 text-center">{{cart.quantity}}</p>
                
                            <div class="bg-[#F9F9F9]">
                                <svg (click)="incrementValue(cart)" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 12.998H13V18.998H11V12.998H5V10.998H11V4.99805H13V10.998H19V12.998Z" fill="#6437A0"/>
                                </svg>
                                    
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="fixed bottom-0 w-full bg-white h-[60px] flex items-center border-t-2">
                <p class="text-[1rem] font-bold px-3 py-2 text-[#6437A0]">Products on Cart: {{ carts.length }}</p>
                <p class="text-[1rem] font-bold px-3 py-2 text-[#6437A0]">Total: ₱{{ total }}</p>
            </footer>
        </div>
    </div>
}

@else {
    <div class="flex flex-col w-full min-h-full">
        <div class="bg-white h-[60px] overscroll-none justify-between items-center py-2 px-6 flex flex-row border-b-2 border-[#E8E8E8]">
            <p class="font-Sofia font-[1000] text-[1.4rem]">Halifax</p>
            <div (click)="userDrop = !userDrop" class="w-[40px] h-[40px] border-2 border-slate-300 rounded-[100px] flex items-center justify-center">
                <svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M30.592 28.1621C28.6362 24.7808 25.6222 22.3563 22.1048 21.2069C23.8447 20.1712 25.1964 18.593 25.9525 16.7146C26.7086 14.8363 26.8272 12.7617 26.29 10.8094C25.7529 8.85713 24.5898 7.13515 22.9793 5.9079C21.3688 4.68065 19.4 4.01599 17.3752 4.01599C15.3504 4.01599 13.3816 4.68065 11.7711 5.9079C10.1606 7.13515 8.99746 8.85713 8.46034 10.8094C7.92323 12.7617 8.04181 14.8363 8.79788 16.7146C9.55396 18.593 10.9057 20.1712 12.6456 21.2069C9.12819 22.355 6.11422 24.7795 4.15842 28.1621C4.08669 28.279 4.03912 28.4091 4.0185 28.5448C3.99789 28.6804 4.00464 28.8188 4.03838 28.9518C4.07211 29.0847 4.13213 29.2096 4.21491 29.319C4.29768 29.4284 4.40153 29.5201 4.52033 29.5888C4.63913 29.6574 4.77046 29.7015 4.90659 29.7185C5.04272 29.7356 5.18088 29.7252 5.31292 29.688C5.44496 29.6507 5.56822 29.5875 5.6754 29.5018C5.78259 29.4162 5.87154 29.31 5.937 29.1894C8.3564 25.0081 12.6327 22.5117 17.3752 22.5117C22.1177 22.5117 26.394 25.0081 28.8134 29.1894C28.8788 29.31 28.9678 29.4162 29.075 29.5018C29.1822 29.5875 29.3054 29.6507 29.4375 29.688C29.5695 29.7252 29.7077 29.7356 29.8438 29.7185C29.9799 29.7015 30.1113 29.6574 30.2301 29.5888C30.3489 29.5201 30.4527 29.4284 30.5355 29.319C30.6183 29.2096 30.6783 29.0847 30.712 28.9518C30.7457 28.8188 30.7525 28.6804 30.7319 28.5448C30.7113 28.4091 30.6637 28.279 30.592 28.1621ZM10.1838 13.2656C10.1838 11.8433 10.6056 10.4529 11.3958 9.27025C12.186 8.08763 13.3091 7.16589 14.6232 6.62159C15.9372 6.07728 17.3832 5.93487 18.7782 6.21235C20.1732 6.48984 21.4545 7.17475 22.4603 8.18049C23.466 9.18622 24.1509 10.4676 24.4284 11.8626C24.7059 13.2576 24.5635 14.7036 24.0192 16.0176C23.4749 17.3317 22.5531 18.4548 21.3705 19.245C20.1879 20.0352 18.7975 20.457 17.3752 20.457C15.4685 20.4549 13.6406 19.6966 12.2924 18.3484C10.9441 17.0002 10.1858 15.1722 10.1838 13.2656Z" fill="#E8E8E8"/>
                </svg>

                @if(userDrop){
                    <div class=" w-[200px] z-[100] top-[70px] right-[20px] bg-white absolute rounded-[10px] border-2 py-3">
                        <p class="font-Sofia font-semibold py-3 cursor-pointer px-3">{{ this.userName}}</p>
                        <p (click)="logout()" class="font-Sofia font-semibold px-3 py-3 cursor-pointer duration-300 hover:duration-300 hover:bg-slate-300">Logout</p>
                    </div>
                }
                    
            </div>
        </div>
    
        <div class="p-10 grid">
            <div class="w-full flex flex-row justify-between items-center select-none">
                <p class="font-Sofia font-[1000] text-[2.2rem]">Browse Products</p>
                <div (click)="isCart = !isCart" class="rounded-[100px] bg-[#6437A0] p-2 px-3">
                    @if(carts.length < 1){
                        <p class="font-Sofia font-bold text-[1rem] text-white cursor-pointer">Check Cart</p>
                    }
                    @else {
                        <p class="font-Sofia font-bold text-[1rem] text-white cursor-pointer">Check Cart ({{ carts.length }})</p>
                    }
                </div>
            </div>
            <div
            class="mobileS:grid-cols-6 tablet:grid-cols-6 laptop:grid-cols-6 desktop:grid-cols-7 grid gap-3 w-full"
            >
                <div
                    *ngFor="let prod of product"
                    (click)="openDialog(prod)"
                    class="flex flex-col h-[290px] mb-5 relative rounded-[5px] bg-white overflow-hidden border-2 duration-300 hover:duration-300 hover:shadow-main"
                >
                    <img [src]="prod.product_image" class="h-[180px] object-cover">
                    <p class="text-[1rem] px-3 pt-2 flex-1">{{ truncateName(prod.product_name) }}</p>
                    <p class="text-[1.2rem] px-3 py-2 text-[#6437A0]">₱{{ prod.product_price }}</p>
                </div>
            </div>
        </div>
    </div>
}